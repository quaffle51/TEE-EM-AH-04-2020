%% Adapted by Peter McFarlane from various sources.
%% All errors of style or content are mine.
%% acknowledgements to Bob Margolis, and also Rob Lynas (from whom some macros are plagiarised).
%% My apologies for not annotating this file, I shall do so soon (yeah, right).
%%

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Engine-specific settings
% Detect pdftex/xetex/luatex, and load appropriate font packages.
% This is inspired by the approach in the iftex package.
% pdftex:
\ifx\pdfmatch\undefined
\else
    \RequirePackage[T1]{fontenc}
    \RequirePackage[utf8]{inputenc}
\fi
% xetex:
\ifx\XeTeXinterchartoks\undefined
\else
    \RequirePackage{fontspec}
    \defaultfontfeatures{Ligatures=TeX}
\fi
% luatex:
\ifx\directlua\undefined
\else
    \RequirePackage{fontspec}
\fi
% End engine-specific settings


\DeclareUnicodeCharacter{3B1}{\ensuremath{\alpha}}
\DeclareUnicodeCharacter{3C9}{\ensuremath{\omega}}
\DeclareUnicodeCharacter{3BB}{\ensuremath{\lambda}}
\RequirePackage{amsmath,amssymb}
\RequirePackage{fullpage}
\RequirePackage{graphicx}
\RequirePackage[svgnames]{xcolor}
\RequirePackage{url}
\urlstyle{same}

\RequirePackage[makestderr]{pythontex}
\restartpythontexsession{\thesection}


\RequirePackage[framemethod=TikZ]{mdframed}

\newcommand{\pytex}{Python\TeX}
\renewcommand*{\thefootnote}{\fnsymbol{footnote}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\ProvidesPackage{tma}
\NeedsTeXFormat{LaTeX2e}
\newcommand{\name}{\relax}
\newcommand{\tma}{\relax}
\newcommand{\course}{\relax}
\newcommand{\pin}{\relax}
\newcommand{\cod}{\relax}
%%

\title{\textbf{TMA: \course-\tma}}
\author{\textbf{\name\space\pin}}

\newcommand{\myname}[1]{\renewcommand{\name}{#1}}
\newcommand{\mytma}[1]{\renewcommand{\tma}{#1}}
\newcommand{\mycourse}[1]{\renewcommand{\course}{#1}}
\newcommand{\mypin}[1]{\renewcommand{\pin}{#1}}
\newcommand{\mycod}[1]{\renewcommand{\cod}{#1}}

\RequirePackage{float} 
\RequirePackage{cancel}
\RequirePackage{enumitem}
\RequirePackage{lastpage}
\RequirePackage[normalem]{ulem}

\RequirePackage{amssymb}
\RequirePackage{amsmath}
\RequirePackage{amsfonts}
\RequirePackage{amsthm}
\RequirePackage{upgreek}
\RequirePackage{wasysym}
\RequirePackage{bm}
\RequirePackage{fancyhdr}  
\RequirePackage{geometry}             
\RequirePackage{xifthen} 
\RequirePackage{verbatim}
\RequirePackage{xspace}
\RequirePackage{microtype}
\RequirePackage{marginnote}


%\RequirePackage[mathscr]{euscript} 
%\RequirePackage[dvips]{graphicx}

\geometry{headheight=10mm}
\geometry{headsep=5mm}
\geometry{bottom=25mm}
\geometry{footskip=15mm}
\geometry{rmargin=30mm,lmargin=30mm}%
\geometry{includemp}
\geometry{marginparwidth=0mm,marginparsep=0mm}
\setlength{\headwidth}{\textwidth}


%\newcommand{\marginnote}[1]{\marginpar{#1}}
\newcommand{\marginnotes}{\geometry{marginparwidth=40mm,marginparsep=5mm}%
		\geometry{rmargin=15mm,lmargin=20mm}%
		\setlength{\headwidth}{\textwidth}}	

\newcounter{question}
\newcounter{qpart}[question]
\newcounter{qsubpart}[qpart]
\newcommand{\half}{\frac{1}{2}}
\newcommand{\gd}{GÃ¢teaux differential\xspace}
\newcommand{\el}{Euler-Lagrange equation\xspace}
\renewcommand{\thequestion}{\arabic{question}}
\renewcommand{\theqpart}{\alph{qpart}}
\renewcommand{\theqsubpart}{\roman{qsubpart}}
\newcommand\numberthis{\stepcounter{equation}{1}\tag{\theequation}}
\newcommand{\sls}{Sturm-Liouville system\xspace}

\newenvironment{question}[1][0]{%
		\ifthenelse{#1>0}{\setcounter{question}{#1-1}}{\relax}%
		\stepcounter{question}\makebox[0pt][r]{\large{Q \thequestion .\quad }}}%
		{\par \vspace{3em}}
\newcommand{\qpart}[1][0]{%
		\ifthenelse{#1>0}{\setcounter{qpart}{#1-1}}{\relax}%
		\stepcounter{qpart}\par%
		\makebox[0pt][r]{\large{(\theqpart )\quad }}}
\newcommand{\qsubpart}[1][0]{%
		\ifthenelse{#1>0}{\setcounter{qsubpart}{#1-1}}{\relax}%
		\stepcounter{qsubpart}\par%
		\makebox[0pt][r]{\large{(\theqsubpart )\quad }}}

\newcommand{\deriv}[2]{\frac{\mathrm{d}#1}{\mathrm{d}#2}}	
\newcommand{\Deriv}[2]{\frac{\mathrm{d}#1}{\mathrm{d}#2}}
\newcommand{\pderiv}[2]{\frac{\partial #1}{\partial #2}}	
\newcommand{\psderiv}[3]{\frac{\partial ^2#1}{\partial #2\partial #3}}
\newcommand{\dd}{\ensuremath{\, \mathrm{d}}}
\newcommand{\e}{\ensuremath{\mathrm{e}}}
\newcommand{\ii}{\ensuremath{\mathrm{i}}}
\newcommand{\N}{\ensuremath{\mathbb{N}}}	
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}	
\newcommand{\R}{\ensuremath{\mathbb{R}}}
\newcommand{\Q}{\ensuremath{\mathbb{Q}}}
\newcommand{\C}{\ensuremath{\mathbb{C}}}
%\DeclareMathAlphabet{\mathpzc}{OT1}{pzc}{m}{it}
\newcommand{\Rr}{\ensuremath{\mathcal{R}}}
\newcommand{\ve}[1]{\mathbf{#1}}
\newcommand{\st}{\ensuremath{^\mathrm{st}}}
\newcommand{\nd}{\ensuremath{^\mathrm{nd}}}
\newcommand{\rd}{\ensuremath{^\mathrm{rd}}}
\newcommand{\nth}{\ensuremath{^\mathrm{th}}}
	
\renewcommand{\vec}[1]{\overrightarrow{#1}}	
\renewcommand{\thefootnote}{\fnsymbol{footnote}}

\newcommand{\rect}{\ensuremath{\sqsubset\!\!\sqsupset}}
\newcommand{\comb}[2]{\ensuremath{^{#1}C_{#2}}}
\newcommand{\perm}[2]{\ensuremath{^{#1}P_{#2}}}
\newcommand{\dprime}{{\prime\prime}}
\newcommand{\EL}{\deriv{}{x}\left(\pderiv{F}{y^\prime}\right)-\pderiv{F}{y} = 0}
\newcommand{\ELE}[3]{\deriv{}{#2}\left(\pderiv{#1}{#3^\prime}\right)-\pderiv{#1}{#3} = 0}
\newcommand{\ELEd}[3]{\deriv{}{#2}\left(\pderiv{#1}{\dot{#3}}\right)-\pderiv{#1}{#3} = 0}
\newcommand{\Int}[3]{\int_{#1}^{#2}\mathrm{d} #3\,\xspace}
\newcommand{\lr}[1]{\left(#1\right)\xspace}
\newcommand{\lrs}[1]{\left[#1\right]\xspace}
\newcommand{\lrc}[1]{\left\{#1\right\}\xspace}
\newcommand{\Sv}[1]{S\left[{#1}\right]}
\newcommand{\nt}{Noether's theorem\xspace}
\newcommand{\auxe}{auxiliary equation\xspace}
\newcommand{\qtq}[1]{\quad\text{#1}\quad}

\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\Log}{Log}
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\Wnd}{Wnd}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\Ker}{Ker}
\DeclareMathOperator{\Orb}{Orb}
\DeclareMathOperator{\Stab}{Stab}
\DeclareMathOperator{\Fix}{Fix}

\numberwithin{equation}{question}	
   
\newtheorem{lemma}{Lemma}
\newtheorem{theorem}{Theorem}
\renewcommand{\qedsymbol}{\blacksmiley}	


\setlength{\parindent}{0pt}
\setlength{\parskip}{2 ex plus 0.3 ex minus 0.2 ex}

\pagestyle{fancy}
\lhead{\textrm{\name \ \pin }} 
\chead{\textrm{\course \ TMA-\tma }}  
\rhead{\textrm{Due:  \cod}}
\lfoot{}\cfoot{\textrm{ \ page \thepage \ of \pageref{LastPage}}}\rfoot{}          

\AtEndDocument{\label{l@stpage}}

\endinput



